<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>John Scarrow — Portfolio</title>
  <meta name="description" content="John Scarrow — portfolio showcasing web and ML projects (Battleship-ML demo).">
  <meta property="og:title" content="John Scarrow — Portfolio">
  <meta property="og:description" content="Portfolio of web and machine learning projects by John Scarrow.">
  <meta property="og:image" content="/images/image.png">
  <meta property="og:url" content="https://johnscarrow.github.io/">
  <style>
    :root{--bg:#ffffff;--muted:#6b7280;--accent:#0b1221}
    html,body{height:100%}
    body { margin: 0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; color:#0f172a; background:var(--bg); }
    header{padding:1rem;background:var(--accent);color:#fff}
    .container{max-width:1100px;margin:0 auto;padding:1rem}
    nav a{color:#d1d5db;text-decoration:none;margin-left:1rem}
    .hero{padding:3rem 1rem;background:linear-gradient(180deg,#ffffff00,#ffffff);}
    .hero h1{margin:0;font-size:2rem}
    .muted{color:var(--muted)}
    .card{border:1px solid #e6e6e6;border-radius:8px;padding:1rem;background:#fff}
    .controls{margin-top:.75rem}
    .btn{display:inline-block;padding:.5rem .75rem;border-radius:6px;background:#0b1221;color:#fff;text-decoration:none;border:0;cursor:pointer}
    .btn.secondary{background:#efefef;color:#111;border:1px solid #ddd}
    .note { padding: .75rem 1rem; background:#fff3cd; color:#663c00; border-radius:6px }
    footer{padding:.75rem 1rem;background:#f6f7fb;color:#222;font-size:.9rem;text-align:center}
    @media (min-width:700px){ .hero{padding:4rem 1rem} }
    /* Make the demo larger for portfolio view */
    .demo-large{min-height:720px}
    @media (max-width:900px){ .demo-large{min-height:420px} }
  </style>
</head>
<body>
  <header>
    <div class="container" style="display:flex;align-items:center;justify-content:space-between">
      <div>
        <strong style="font-size:1rem">John Scarrow</strong>
      </div>
      <nav aria-label="Primary">
        <a href="#about">About</a>
        <a href="#projects">Projects</a>
        <a href="#contact">Contact</a>
        <a href="https://github.com/JohnScarrow/JohnScarrow" target="_blank" rel="noopener noreferrer">GitHub</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container">
        <h1>Hi — I'm John Scarrow</h1>
        <p class="muted">I build web and machine learning projects, with a focus on practical demos and reproducible experiments. Below are a few highlights and a live demo you can load on demand.</p>
        <p style="margin-top:.75rem"><a class="btn" href="https://github.com/JohnScarrow/JohnScarrow" target="_blank" rel="noopener noreferrer">View GitHub</a> <a class="btn secondary" href="#projects">See projects</a></p>
      </div>
    </section>

    <section id="about" class="container" style="padding-top:1rem">
      <h2>About</h2>
      <p class="muted">I create interactive web demos and machine learning projects. This site is a lightweight portfolio intended for interviewers — focused, fast, and easy to scan.</p>
    </section>

    <section id="projects" class="container" style="padding-top:1rem">
      <h2>Projects</h2>
      <div class="card" style="margin-top:.5rem">
        <h3 style="margin:.25rem 0">Battleship-ML — Live demo</h3>
        <p class="muted">A WebAssembly demo showing a Battleship AI. For performance and to keep this page fast, the demo iframe is not loaded by default — hover the preview for a moment or click <strong>Load demo</strong> to embed it, or open it in a new tab.</p>

        <div style="display:flex;gap:1rem;flex-wrap:wrap;align-items:center;margin-top:.75rem">
              <div style="flex:1;min-width:260px">
            <img id="preview-img" src="/images/image.png" alt="Preview of Battleship-ML demo" tabindex="0" style="width:100%;max-height:240px;object-fit:cover;border-radius:6px;border:1px solid #e6e6e6;cursor:pointer" />
            <div class="controls">
              <a href="https://johnscarrow.github.io/battleship-ml/" target="_blank" rel="noopener noreferrer" class="btn secondary">Open demo</a>
              <button id="load-demo" class="btn" style="margin-left:.5rem">Load demo</button>
              <button id="load-autoplay" class="btn secondary" style="margin-left:.5rem">Load &amp; Autoplay</button>
            </div>
          </div>

          <div style="flex:1;min-width:300px">
            <div id="demo-container" class="demo-large" style="min-height:240px;border-radius:6px;overflow:hidden;background:#000;display:flex;align-items:center;justify-content:center;color:#fff">
              <div id="demo-placeholder" style="padding:1rem;text-align:center;color:#ddd">Demo not loaded. Hover the preview (600ms) or click "Load demo" to embed — fallback link available if blocked.</div>
            </div>
            <div id="frame-blocked" class="note" style="margin-top:.75rem;display:none;" role="status" aria-live="polite">
              The demo could not be embedded due to framing/security policies. Open in a new tab: <a href="https://johnscarrow.github.io/battleship-ml/" target="_blank" rel="noopener noreferrer">Open Battleship-ML</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="contact" class="container" style="padding-top:1rem;padding-bottom:2rem">
      <h2>Contact</h2>
      <p class="muted">Find my projects on <a href="https://github.com/JohnScarrow" target="_blank" rel="noopener noreferrer">GitHub</a>. If you'd like a resume copy or references for interviews, email me (link omitted here).</p>
    </section>
  </main>

  <footer>
    <div class="container">© John Scarrow — <a href="https://github.com/JohnScarrow/JohnScarrow" target="_blank" rel="noopener noreferrer">Profile repo</a></div>
  </footer>

  <script>
    // Lazy-load the demo iframe: hover (~500ms) or click on preview, or click the button
    // Adds keyboard accessibility (Enter/Space) and a small fade-in animation for the iframe.
    (function(){
      var loadBtn = document.getElementById('load-demo');
      var demoContainer = document.getElementById('demo-container');
      var frameBlocked = document.getElementById('frame-blocked');
      var previewImg = document.getElementById('preview-img');
      var demoSrc = 'https://johnscarrow.github.io/battleship-ml/';
      var hoverTimer = null;
      var HOVER_DELAY = 500; // milliseconds

      // Add fade-in animation style for iframe when inserted
      var style = document.createElement('style');
      style.innerHTML = '\n        .demo-fade-in{animation: demoFadeIn 300ms ease-out both;}\n        @keyframes demoFadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}\n      ';
      document.head.appendChild(style);

      function showBlocked(){ if(frameBlocked) frameBlocked.style.display = 'block'; }
      function hideBlocked(){ if(frameBlocked) frameBlocked.style.display = 'none'; }

      function createAndInsertIframe(opts){
        if(document.getElementById('demo-frame')) return; // already loaded
        var src = demoSrc;
        if(opts && opts.autoplay){ src += (src.indexOf('?')>-1? '&':'?') + 'autoplay=1'; }
        if(opts && opts.muted){ src += (src.indexOf('?')>-1? '&':'?') + 'muted=1'; }
        var iframe = document.createElement('iframe');
        iframe.id = 'demo-frame';
        iframe.src = src;
        // Allow autoplay where the browser permits it and allow fullscreen
        iframe.allow = 'autoplay; fullscreen';
        iframe.title = 'Battleship-ML demo';
        iframe.loading = 'lazy';
        iframe.style.width = '100%';
        iframe.style.height = '100%';
        iframe.style.border = '0';
        iframe.style.display = 'block';
        iframe.className = 'demo-fade-in';
        iframe.addEventListener('load', function(){ hideBlocked(); });
        demoContainer.innerHTML = '';
        demoContainer.appendChild(iframe);
        setTimeout(function(){ try { if(!iframe.contentWindow || iframe.clientHeight===0){ showBlocked(); } } catch(e){ showBlocked(); } }, 2500);
      }

      if(loadBtn) loadBtn.addEventListener('click', function(){ createAndInsertIframe(); });
      var loadAutoplay = document.getElementById('load-autoplay');
      if(loadAutoplay) loadAutoplay.addEventListener('click', function(){ createAndInsertIframe({autoplay:true, muted:true}); });
      if(previewImg){
        // Click loads immediately (useful for touch devices)
        previewImg.addEventListener('click', function(e){ e.preventDefault(); createAndInsertIframe(); });
        // Keyboard: Enter or Space should load the demo as well
        previewImg.addEventListener('keydown', function(e){ if(e.key==='Enter' || e.key===' ' || e.key==='Spacebar'){ e.preventDefault(); createAndInsertIframe(); } });
        // Hover for desktop: start timer on mouseenter, cancel on mouseleave
        previewImg.addEventListener('mouseenter', function(){
          if(hoverTimer) clearTimeout(hoverTimer);
          hoverTimer = setTimeout(function(){ createAndInsertIframe(); hoverTimer = null; }, HOVER_DELAY);
        });
        previewImg.addEventListener('mouseleave', function(){ if(hoverTimer){ clearTimeout(hoverTimer); hoverTimer = null; } });
      }
    })();
  </script>
</body>
</html>
